<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hx2的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="maybe..or">
<meta property="og:type" content="website">
<meta property="og:title" content="Hx2的博客">
<meta property="og:url" content="https://github.com/Hx2heng/index.html">
<meta property="og:site_name" content="Hx2的博客">
<meta property="og:description" content="maybe..or">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hx2的博客">
<meta name="twitter:description" content="maybe..or">
  
    <link rel="alternative" href="/atom.xml" title="Hx2的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/img/head-pic.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">黄信政</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/tags/前端">前端技术</a></li>
				        
							<li><a href="/tags/叽里呱啦">叽里呱啦</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/Hx2heng/" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/justaboy/" title="weibo">weibo</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/JS/" style="font-size: 15px;">JS</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/前端/" style="font-size: 20px;">前端</a> <a href="/tags/叽里呱啦/" style="font-size: 10px;">叽里呱啦</a> <a href="/tags/技术/" style="font-size: 20px;">技术</a> <a href="/tags/生活/" style="font-size: 10px;">生活</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">黄信政，前端程序员，希望与大家共同进步。</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">黄信政</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/img/head-pic.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">黄信政</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/tags/前端">前端技术</a></li>
		        
					<li><a href="/tags/叽里呱啦">叽里呱啦</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Hx2heng/" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/justaboy/" title="weibo">weibo</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-webpack与bootstrap的配合方案" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/02/24/webpack与bootstrap的配合方案/" class="article-date">
  	<time datetime="2017-02-23T17:18:34.000Z" itemprop="datePublished">2017-02-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/24/webpack与bootstrap的配合方案/">通过webpack使用自定义bootstrap解决方案</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="如何更好地使用自定义的Bootstrap？">如何更好地使用自定义的Bootstrap？</h3><p>bootstrap官网提供自定义版本的下载，用户只要选择需要的组件就能下载对应的版本。但是，这种做法实在是太繁琐了。而且如果我们想要方便选择所需组件，又想通过sass/less修改bootstrap，要通过什么方式？答案就是’bootstrap-loader’（这个是对应修改sass的，本文只讲sass，还有个对应less的，叫’bootstrap-webpack’）。</p>
<h3 id="bootstrap-loader的使用">bootstrap-loader的使用</h3><p>bootstrap-loader ，从名字上看得出他是一个加载器，配合webpack使用的。它能使页面引用到自定义版本的bootstrap。</p>
<p>###1.安装</p>
<p>安装’bootstrap-loader’</p>
<pre><code>npm <span class="keyword">install</span> bootstrap-loader
</code></pre><p>安装所需依赖：</p>
<pre><code>npm install --save-dev bootstrap-sass
npm install --save-dev css-loader <span class="keyword">node</span><span class="identifier"></span><span class="title">-sass</span> resolve-url-loader sass-loader style-loader url-loader
</code></pre><p>你有可能还需要安装：</p>
<pre><code>npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> imports-loader exports-loader
npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> postcss-loader        
</code></pre><p>###2.使用<br>1.简单使用方法：</p>
<pre><code><span class="keyword">import</span> <span class="string">'bootstrap-loader'</span>
</code></pre><p>此时会引用到完整的bootstrap。</p>
<p>注：bootstrap引用了诸如svg、ttf等文件，所以也需要在webpack.config.js配置好对应的加载器：</p>
<pre><code><span class="rules">{ <span class="rule"><span class="attribute">test</span>:<span class="value"> /\.scss$/, use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>, <span class="string">'postcss-loader'</span>, <span class="string">'sass-loader'</span>] </span></span></span>},
<span class="rules">{ <span class="rule"><span class="attribute">test</span>:<span class="value"> /\.css$/, use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>, <span class="string">'postcss-loader'</span>] </span></span></span>},
<span class="rules">{
<span class="rule"><span class="attribute">test</span>:<span class="value"> /\.woff2?(\?v=[<span class="number">0</span>-<span class="number">9</span>]\.[<span class="number">0</span>-<span class="number">9</span>]\.[<span class="number">0</span>-<span class="number">9</span>])?$/,
use: <span class="string">'url-loader?limit=10000'</span>,
</span></span></span>},
<span class="rules">{
<span class="rule"><span class="attribute">test</span>:<span class="value"> /\.(ttf|eot|svg)(\?[\s\S]+)?$/,
use: <span class="string">'file-loader'</span>,
</span></span></span>}
</code></pre><p>2.可自定义版：</p>
<p>首先在入口文件前面加载’bootstrap-loader’（此时不用在index.js里写<code>import &#39;bootstrap-loader&#39;</code>）:</p>
<pre><code><span class="tag">entry</span>: {
    <span class="attribute">index</span>: [<span class="string">'bootstrap-loader'</span>, <span class="string">'./index.js'</span>],<span class="comment">//webpack数组形式入口文件以数组最后一个作为出口文件</span>
    <span class="attribute">test</span>: <span class="string">'./test.js'</span>,
},
</code></pre><p>然后在根目录添加.bootstraprc文件，即是bootstrap自定义配置文件，文件可以用yml或者json格式编写自定义属性，完整案例(yml格式)：</p>
<pre><code><span class="attribute">bootstrapVersion</span>: <span class="string">3</span>

<span class="http"><span class="attribute">useCustomIconFontPath</span>: <span class="string">false</span>

<span class="sqf">styleLoaders:
  - style
  - css
  - sass

extractStyles: <span class="literal">false</span>

styles:

  <span class="preprocessor"># Mixins</span>
  mixins: <span class="literal">true</span>

  <span class="preprocessor"># Reset and dependencies</span>
  normalize: <span class="literal">true</span>
  print: <span class="literal">true</span>
  glyphicons: <span class="literal">true</span>

  <span class="preprocessor"># Core CSS</span>
  scaffolding: <span class="literal">true</span>
  <span class="built_in">type</span>: <span class="literal">true</span>
  code: <span class="literal">true</span>
  grid: <span class="literal">true</span>
  tables: <span class="literal">true</span>
  forms: <span class="literal">true</span>
  buttons: <span class="literal">true</span>

  <span class="preprocessor"># Components</span>
  component-animations: <span class="literal">true</span>
  dropdowns: <span class="literal">true</span>
  button-groups: <span class="literal">true</span>
  input-groups: <span class="literal">true</span>
  navs: <span class="literal">true</span>
  navbar: <span class="literal">true</span>
  breadcrumbs: <span class="literal">true</span>
  pagination: <span class="literal">true</span>
  pager: <span class="literal">true</span>
  labels: <span class="literal">true</span>
  badges: <span class="literal">true</span>
  jumbotron: <span class="literal">true</span>
  thumbnails: <span class="literal">true</span>
  alerts: <span class="literal">true</span>
  progress-bars: <span class="literal">true</span>
  media: <span class="literal">true</span>
  <span class="built_in">list</span>-<span class="built_in">group</span>: <span class="literal">true</span>
  panels: <span class="literal">true</span>
  wells: <span class="literal">true</span>
  responsive-embed: <span class="literal">true</span>
  close: <span class="literal">true</span>

  <span class="preprocessor"># Components w/ JavaScript</span>
  modals: <span class="literal">true</span>
  tooltip: <span class="literal">true</span>
  popovers: <span class="literal">true</span>
  carousel: <span class="literal">true</span>

  <span class="preprocessor"># Utility classes</span>
  utilities: <span class="literal">true</span>
  responsive-utilities: <span class="literal">true</span>

<span class="preprocessor">### Bootstrap scripts</span>
scripts:
  transition: <span class="literal">true</span>
  alert: <span class="literal">true</span>
  button: <span class="literal">true</span>
  carousel: <span class="literal">true</span>
  collapse: <span class="literal">true</span>
  dropdown: <span class="literal">true</span>
  modal: <span class="literal">true</span>
  tooltip: <span class="literal">true</span>
  popover: <span class="literal">true</span>
  scrollspy: <span class="literal">true</span>
  tab: <span class="literal">true</span>
  affix: <span class="literal">true</span></span></span>
</code></pre><p>如果想给不同页面配置不用的.bootstraprc文件或者不想把.bootstraprc文件放在根目录，可以修改入口文件的bootstrap-loader的后缀，</p>
<p>格式：<strong><code>bootstrap-loader/lib/bootstrap.loader?configFilePath=[文件位置]/[文件名字].[文件类型]!bootstrap-loader/no-op.js</code></strong></p>
<p>eg:</p>
<pre><code>entry: {
    index: [`<span class="keyword">bootstrap</span>-loader/lib/<span class="keyword">bootstrap</span>.loader?configFilePath=<span class="label">${__dirname}</span>/.bootstraprc!<span class="keyword">bootstrap</span>-loader/<span class="keyword">no</span>-op.js`, './index.js'],
    <span class="keyword">test</span>: './<span class="keyword">test</span>.js',
}
</code></pre><p>而自定义样式需要在.bootstraprc添加配置(按需要设置，不设置注释就可以):</p>
<pre><code><span class="comment">//在Bootstrap variables之前加载</span>
<span class="string">preBootstrapCustomizations:</span> .<span class="regexp">/app/</span>styles<span class="regexp">/bootstrap/</span>pre-customizations.scss

<span class="comment">//在Bootstrap variables之后bootstrap之前加载</span>
<span class="string">bootstrapCustomizations:</span> .<span class="regexp">/app/</span>styles<span class="regexp">/bootstrap/</span>customizations.scss

<span class="comment">//在bootstrap之后加载</span>
<span class="string">appStyles:</span> .<span class="regexp">/app/</span>styles/app.scss
</code></pre><p>【附<a href="http://v3.bootcss.com/customize/#less-variables" target="_blank" rel="external">bootstrap 样式变量表</a>】</p>
<p>bootstrap-loader的官方源码：<a href="https://github.com/shakacode/bootstrap-loader">https://github.com/shakacode/bootstrap-loader</a>，上面会有更多解决方案。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/">JS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-es6+express+ejs+webpack+sass+mongoDB" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/02/23/es6+express+ejs+webpack+sass+mongoDB/" class="article-date">
  	<time datetime="2017-02-23T02:28:29.000Z" itemprop="datePublished">2017-02-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/23/es6+express+ejs+webpack+sass+mongoDB/">es6+express+ejs+webpack+sass+mongoDB 部署</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>项目地址：<a href="https://github.com/Hx2heng/blogDemo">es6+express+ejs+webpack+sass+mongoDB</a></p>
<h2 id="使用">使用</h2><pre><code>npm i <span class="comment">//安装</span>
npm start <span class="comment">//开启服务</span>
npm <span class="keyword">run</span> dev  <span class="comment">//开发模式</span>
npm <span class="keyword">run</span> bulid <span class="comment">//发布</span>
</code></pre><h2 id="项目目录">项目目录</h2><pre><code><span class="comment">--root</span>
    |<span class="comment">--config                //配置文件</span>
    |<span class="comment">--middlewares            //中间件</span>
    |<span class="comment">--pubulic                //静态资源</span>
     |<span class="comment">--js</span>
     |<span class="comment">--css/sass</span>
     |<span class="comment">--images</span>
    |<span class="comment">--router                //路由控制器</span>
    |<span class="comment">--tools                //工具</span>
     |<span class="comment">--lib</span>
     |<span class="comment">--webpack.config.js</span>
    |<span class="comment">--views                //视图文件</span>
     |<span class="comment">--components</span>
    |<span class="comment">--package.json</span>
    |<span class="comment">--...</span>
</code></pre><h2 id="es6预设置">es6预设置</h2><p>使用babel对es6进行转换：</p>
<p>下载</p>
<pre><code> <span class="string">"devDependencies"</span>: {
<span class="string">"babel"</span>: <span class="string">"6.23.0"</span>,
<span class="string">"babel-cli"</span>: <span class="string">"6.23.0"</span>,
<span class="string">"babel-core"</span>: <span class="string">"6.23.1"</span>,
<span class="string">"babel-loader"</span>: <span class="string">"6.4.0"</span>,<span class="comment">//webpack的babel-loader</span>
<span class="string">"babel-plugin-transform-es2015-modules-commonjs"</span>: <span class="string">"6.23.0"</span>,<span class="comment">//允许使用es6的modules</span>
<span class="string">"babel-preset-env"</span>: <span class="string">"1.2.1"</span>,
<span class="string">"babel-preset-react"</span>: <span class="string">"6.23.0"</span>,<span class="comment">//支持jsx转换</span>
<span class="string">"babel-preset-stage-0"</span>: <span class="string">"6.22.0"</span>
}
</code></pre><p>配置可以不写在.babelrc里，直接写在package.json</p>
<pre><code> <span class="string">"babel"</span>: {
<span class="string">"presets"</span>: [
  <span class="string">"react"</span>,
  <span class="string">"stage-0"</span>
],
<span class="string">"plugins"</span>: [
  <span class="string">"transform-es2015-modules-commonjs"</span>
]
}
</code></pre><p>npm script直接运行babel-node</p>
<pre><code><span class="string">"scripts"</span>: {
<span class="string">"test"</span>: <span class="string">"echo \"</span><span class="keyword">Error</span>: <span class="keyword">no</span> <span class="keyword">test</span> specified\<span class="string">" &amp;&amp; exit 1"</span>,
<span class="string">"start"</span>: <span class="string">"babel-node tools/start"</span>,<span class="comment">//表示执行tools文件夹的start文件，执行之前进行es6转码</span>
<span class="string">"dev"</span>: <span class="string">"supervisor -w tools,router,middlewares,config,views -- -r babel-register tools/dev"</span>
}
</code></pre><h2 id="es6_-_异步操作_async/await_语法">es6 - 异步操作 async/await 语法</h2><p>async函数允许你像同步写法那样去写异步操作，async函数里面关键字await后面接一个Promise，此时函数执行会在await后的Promise执行完成后才会往下执行。</p>
<p>举个例子，创建服务器是异步操作，我们需要在服务器创建完成后才布置路由。首先创建服务器，并把它包在Promise里面：</p>
<pre><code>let runServer = <span class="function"><span class="params">(app)</span>=&gt;</span>{
    <span class="keyword">return</span> <span class="keyword">new</span> Promise(resolve=&gt;{
        var server = app.listen(<span class="string">'3000'</span>,<span class="function"><span class="params">()</span>=&gt;</span>{
            var host = server.address().address;
              var port = server.address().port;
            <span class="built_in">console</span>.log(<span class="string">'server running at http://%s:%s'</span>, host, port);
            resolve();
        })
    }) 
} 
</code></pre><p>然后在主体事件中，写异步操作：</p>
<pre><code> <span class="keyword">let</span> appPro = <span class="keyword">async</span> ()=&gt;{
    <span class="keyword">let</span> app = express();
    <span class="comment">//等待启动服务 </span>
    <span class="keyword">await</span> runServer(app);
    <span class="comment">//启动路由</span>
    router(app);
}
</code></pre><p>此时，路由 router() 会在服务器创建完成后执行。</p>
<h2 id="express_将session_存入Redis">express 将session 存入Redis</h2><pre><code><span class="keyword">import</span> session <span class="keyword">from</span> <span class="string">'express-session'</span>;
<span class="keyword">import</span> connectRedis <span class="keyword">from</span> <span class="string">'connect-redis'</span>;

<span class="keyword">let</span> sessionCfg = {
    secret:<span class="string">'huangxinzheng'</span>,
    resave:<span class="literal">true</span>,<span class="comment">//即使 session 没有被修改，也保存 session 值，默认为 true（！不添加报错,下同）</span>
    saveUninitialized: <span class="literal">false</span>,<span class="comment">// 设置为 false，强制创建一个 session，即使用户未登录</span>
    cookie: {
        maxAge: <span class="number">1000</span>*<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span><span class="comment">// 过期时间，过期后 cookie 中的 session id 自动删除</span>
    }
}

 <span class="comment">//设置session,将session存在 Redis 中</span>
<span class="keyword">var</span> RedisStore = connectRedis(session);
<span class="keyword">let</span> rs = <span class="keyword">new</span> RedisStore();
app.use(session(extend(<span class="literal">true</span>,{},serverCfg,rs)));
</code></pre><h2 id="express_中间件的使用">express 中间件的使用</h2><p>express的中间件很重要，甚至可以说express就是通过中间来实现应用的。express有很多开源中间件可以给我们下载使用（比如express-session）。把中间件放进app.use()里就代表每次服务器请求都会经过这个中间件（假设中间件没有停止下一个的情况下）。我们也可以自己写中间件，其实中间件就是一个函数，这个函数有<code>req</code>，<code>res</code>，<code>next</code> 三个参数，分别代表请求对象，响应对象，和next方法。执行next方法可过渡当前中间件。</p>
<p>写一个记录访问次数的中间件，配合session记录一天内用户的访问次数：</p>
<pre><code>let showReqTimes = (req,res,<span class="keyword">next</span>) =&gt;{
<span class="keyword">if</span>(!req.session.reqTimes){
    req.session.reqTimes =<span class="number">1</span><span class="comment">;</span>
    res.<span class="built_in">send</span>(<span class="string">'你第1次访问了本网站'</span>)<span class="comment">;</span>
}<span class="keyword">else</span>{
    req.session.reqTimes++<span class="comment">;</span>
    res.<span class="built_in">send</span>(<span class="string">'&lt;p&gt;你第'</span>+req.session.reqTimes+<span class="string">'次访问了本网站&lt;/p&gt;'</span>)<span class="comment">;</span>
}

<span class="keyword">next</span>()<span class="comment">;//执行下一个中间件</span>
}

export <span class="keyword">default</span> showReqTimes
</code></pre><p>假设是记录在访问’/‘的时候：</p>
<pre><code><span class="literal">import</span> showReqTimes  from <span class="string">'./showReqTimes.js'</span>
app.<span class="literal">get</span>(<span class="string">'/'</span>, showReqTimes, (req, res) =&gt; {<span class="comment">//此时每次访问根目录之后都会进入showReqTimes这个中间件</span>
    <span class="comment">//do something..</span>
})
</code></pre><h2 id="webpack新版本的写法变化-Loader">webpack新版本的写法变化-Loader</h2><p>webpack2.2较上一代在语法方面有了变化，特别是loader：</p>
<pre><code>原先写法:
<span class="tag">module</span>: <span class="rules">{
    <span class="rule"><span class="attribute">loaders</span>:<span class="value"> [{
        test: /\.css$/,
        loader: <span class="string">'style!css'</span>
    </span></span></span>}]
}
现在写法：
 <span class="tag">module</span>: <span class="rules">{
    <span class="rule"><span class="attribute">rules</span>:<span class="value"> [{
        test: /\.css$/,
        use: [ <span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>]
    </span></span></span>}]
}
</code></pre><p>loaders改为了rules，loader改为了use。语义上更加容易理解了，“对不同的文件类型使用不同的规则”。webpack 虽好，但是配置的时候很麻烦，更新了新版本之后，写法不习惯，报错也是莫名其妙。开发的要一边看官方文档，花了很多时间，看来要多花点时间去适应。</p>
<h2 id="问题&amp;解决">问题&amp;解决</h2><h4 id="1-_supervisor_监听_es6_文件">1. supervisor 监听 es6 文件</h4><p>supervisor 默认监听不经过处理的js文件，所如果是直接监听es6语法的js文件，那么会出现语法错。</p>
<p>所以，采用<code>babel-register</code>对es6文件进行预转换，并且设置<code>supervisor</code>：</p>
<pre><code>supervisor -w tools,router <span class="comment">-- -r babel-register tools/start</span>
</code></pre><p><code>supervisor</code>的官方文档可参见 :<a href="https://www.npmjs.com/package/supervisor" target="_blank" rel="external"> https://www.npmjs.com/package/supervisor</a></p>
<h4 id="2-_ejs模板引擎不同页面引用不同样式文件">2. ejs模板引擎不同页面引用不同样式文件</h4><p>ejs是款简单好用的模板引擎，但是网上很多人说ejs在不同的页面引用不同的文件非常不方便，有人给出在res.locals给模板传参的方法，把页面的引用样式文件从后台传给模板引擎进行解析。个人感觉但是这种方法不妥，管理起来不方便，样式文件就应该写在视图页面，不应该在路由里面写。</p>
<p>其实可以通过ejs的include解决这个问题。</p>
<p>ejs2.0+的include函数已经支持传参功能。利用这个特性我们可以简单实现ejs模板引擎不同页面引用不同样式文件了。具体实现：</p>
<p>在首页的视图中往header里面穿参数：</p>
<pre><code><span class="xml"></span>&lt;%-<span class="ruby"> <span class="keyword">include</span>(<span class="string">'layouts/header'</span>,{<span class="symbol">styles:</span>[<span class="string">'index'</span>,<span class="string">'jquery'</span>]}) </span>%&gt;<span class="xml"></span>
</code></pre><p>然后在header的视图中修改引用样式：</p>
<pre><code><span class="xml"> </span>&lt;%<span class="perl"> <span class="keyword">for</span>(var i=<span class="number">0</span>; i&lt;styles.<span class="keyword">length</span>; i++) {</span>%&gt;<span class="xml">
   <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/css/</span></span></span>&lt;%=<span class="perl"> styles[i] </span>%&gt;<span class="xml"><span class="tag"><span class="value">.css"</span>&gt;</span>
</span>&lt;%<span class="perl"> } </span>%&gt;<span class="xml"></span>
</code></pre><h4 id="3-_server-address()-address_获取到IPv6格式的主机地址”::”？">3. server.address().address 获取到IPv6格式的主机地址”::”？</h4><p>以为如果计算机默认启用了IPv6，那么 server.address().address 获取到的就是IPv6的地址。如下：</p>
<pre><code><span class="keyword">var</span> express      = <span class="built_in">require</span>(<span class="string">'express'</span>);
<span class="keyword">var</span> app          = express();
<span class="keyword">var</span> server = app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{
    <span class="keyword">var</span> host = server.address().address;
    <span class="keyword">var</span> port = server.address().port;
    <span class="built_in">console</span>.log(<span class="string">'running at http://'</span> + host + <span class="string">':'</span> + port)
});

res：<span class="string">'server running at http://:::3000'</span>    
</code></pre><p>如果想得到IPv4的主机地址，请显式得给listen传递主机名：</p>
<pre><code><span class="keyword">var</span> express      = <span class="built_in">require</span>(<span class="string">'express'</span>);
<span class="keyword">var</span> app          = express();
<span class="keyword">var</span> server = app.listen(<span class="number">3000</span>,<span class="string">'localhost'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{
    <span class="keyword">var</span> host = server.address().address;
    <span class="keyword">var</span> port = server.address().port;
    <span class="built_in">console</span>.log(<span class="string">'running at http://'</span> + host + <span class="string">':'</span> + port)
});

res：<span class="string">'server running at http://127.0.0.1:3000'</span>
</code></pre><h4 id="4-_browser-sync_与_webpack-dev-middleware_的配合？">4. browser-sync 与 webpack-dev-middleware 的配合？</h4><pre><code><span class="keyword">const</span> bundler = webpack(webpackCfg);
<span class="keyword">const</span> wpdm = webpackDevMiddleware(bundler,{
    publicPath: webpackCfg.output.publicPath
});

<span class="keyword">let</span> handleBundleComplete = async () =&gt; {
    <span class="keyword">if</span>(!app){
        await appPro().then(exApp=&gt;{app = exApp});
        <span class="comment">//app.use(wpdm)</span>
        <span class="comment">//启动 browser-sync</span>
        bs = browserSync.create();
        bs.init({
          files: path.resolve(__dirname, <span class="string">'../public/*/**'</span>),<span class="comment">//监听目录</span>
          proxy: {
            target: serverCfg.host+<span class="string">':'</span>+serverCfg.port,
            middleware:[wpdm]
          },
          open: <span class="keyword">false</span>,
          reloadOnRestart: <span class="keyword">true</span>
        },resolve);
    }<span class="keyword">else</span>{
        bs.reload();
    }

};
bundler.plugin(<span class="string">'done'</span>, () =&gt; handleBundleComplete());
</code></pre><p>具体流程：</p>
<ul>
<li>1.先webpack生成bundler（此阶段并不执行生成）</li>
<li>2.用webpack-dev-middleware把bundler包成中间件wpdm</li>
<li>3.第一步生成bundler成功后启动服务器</li>
<li>4.启动服务器成功后创建并初始化browser-sync</li>
<li>5.第二步生成的中间件wpdm给到browser-sync中间件设置</li>
<li>6.每次触发browser-sync的时候都执行中间件wpdm</li>
<li>7.第一次之后的中间件wpdm执行都不用再启动服务器和创建browser-sync，只是执行browser-sync的reload事件</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/">JS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-webpack实现HMR热加载" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/01/11/webpack实现HMR热加载/" class="article-date">
  	<time datetime="2017-01-11T06:38:54.000Z" itemprop="datePublished">2017-01-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/11/webpack实现HMR热加载/">webpack实现HMR热加载</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>“热模块替换”(HMR)是在某个功能活动运行时注入更新的模块。</p>
<pre><code>就像对每一个模块进行LiveReload
</code></pre><p>也就是说，在开发过程中，我们不用刷新页面，就能实现局部的更新，无论是css代码，还是js代码。</p>
<h2 id="webpack实现HMR热加载">webpack实现HMR热加载</h2><p>实现webpack HMR需要通过webpack的两个中间件，即<code>webpack-dev-middleware</code>和<code>webpack-hot-middleware</code>。</p>
<p><strong><a href="https://github.com/webpack/webpack-dev-middleware">webpack-dev-middleware</a></strong>是什么：</p>
<blockquote>
<p>The webpack-dev-middleware is a small middleware for a connect-based middleware stack. It uses webpack to compile assets in-memory and serve them. When a compilation is running every request to the served webpack assets is blocked until we have a stable bundle.</p>
</blockquote>
<p>可以看出<code>webpack-dev-middleware</code>是一个中间件，负责把webpack打包的bundle<strong>生成在内存中，而不在磁盘里</strong>，而且在其生成稳定的包之前，<strong>编译将被阻塞</strong>（使网页更新有貌似网络延迟的效果），如此一来我们就不需要去关心编译是否完成了。</p>
<p><strong><a href="https://github.com/glenjamin/webpack-hot-middleware">webpack-hot-middleware</a></strong>是什么：</p>
<blockquote>
<p>This module is only concerned with the mechanisms to connect a browser client to a webpack server &amp; receive updates. It will subscribe to changes from the server and execute those changes using webpack’s HMR API. Actually making your application capable of using hot reloading to make seamless changes is out of scope, and usually handled by another library.</p>
</blockquote>
<p><code>webpack-dev-middleware</code>用来在浏览器客户端和webpack服务端进行连接，监听服务端改变的文件，然后<br>实现浏览器客户端的热加载。</p>
<hr>
<p>我写了个 <a href="https://github.com/Hx2heng/Webpack-HMR-demo">例子</a> 简单实现了HMR。</p>
<p>首先，先安装npm模块（这里我们用express作为服务器）：</p>
<pre><code>npm i express webpack webpack-<span class="built_in">dev</span>-middleware webpack-hot-middleware --<span class="built_in">save</span>-<span class="built_in">dev</span>
</code></pre><p>然后，编写webpack.config.js:</p>
<pre><code><span class="comment">//增加三个插件，并在入口文件后增加一段代码</span>
<span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>),
    webpack =<span class="built_in">require</span>(<span class="string">'webpack'</span>);
<span class="keyword">var</span> config = {
    entry: 
    [<span class="string">"./src/a.js"</span>,
    <span class="string">'webpack-hot-middleware/client?path=/__webpack_hmr&amp;timeout=20000'</span>,
    ],
    output: {
        path: path.resolve(__dirname, <span class="string">'./output/'</span>),
        filename:<span class="string">'bundle.js'</span>,
    },
    plugins: [
        <span class="keyword">new</span> webpack.optimize.OccurrenceOrderPlugin(),
        <span class="keyword">new</span> webpack.HotModuleReplacementPlugin(),
        <span class="keyword">new</span> webpack.NoEmitOnErrorsPlugin()
    ]
}

<span class="built_in">module</span>.exports = config;
</code></pre><p>然后给express配置中间件:</p>
<pre><code><span class="keyword">var</span> express = <span class="keyword">require</span>(<span class="string">'express'</span>),
    app = express(),
    webpack = <span class="keyword">require</span>(<span class="string">'webpack'</span>),
    config = <span class="keyword">require</span>(<span class="string">'./webpack.config.js'</span>),
    webpackDevMiddleware = <span class="keyword">require</span>(<span class="string">'webpack-dev-middleware'</span>),
    webpackHotMiddleware = <span class="keyword">require</span>(<span class="string">'webpack-hot-middleware'</span>);


<span class="comment">//如果有回调函数并且没有中间件插件则直接运行webpack。如果没有回调函数或没有中间件插件则不直接执行webpack。</span>
<span class="keyword">var</span> compiler = webpack(config, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{
    console.log(<span class="string">'done'</span>)
}); 

<span class="comment">/*这里设置bundle生成位置，注意是生成在内存中，由于我们设置了静态目录'output'，
所以这里实际上的网络位置是localhost:8080/，文件位置是 根目录/output */</span>
<span class="keyword">var</span> options = {
    publicPath: <span class="string">"/"</span>,
}

app.<span class="keyword">use</span>(webpackDevMiddleware(compiler, options));
app.<span class="keyword">use</span>(webpackHotMiddleware(compiler));
app.<span class="keyword">use</span>(express.<span class="keyword">static</span>(<span class="string">'output'</span>))
app.listen(<span class="number">8080</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{
    console.log(<span class="string">'Example app listening on!'</span>)
})
</code></pre><p>最后在需要热加载的文件下加入（案例中是a.js）：</p>
<pre><code><span class="keyword">if</span> (<span class="class"><span class="keyword">module</span>.<span class="title">hot</span>) {</span>
    <span class="class"><span class="keyword">module</span>.<span class="title">hot</span>.<span class="title">accept</span>();</span>
}
</code></pre><p>准备就绪，运行：</p>
<pre><code><span class="built_in">npm</span> start
</code></pre><p>浏览器打开<code>localhost:8080</code> ，会看到控制台输出</p>
<blockquote>
<p>[HMR] connected</p>
</blockquote>
<p>代表热加载连接成了！ </p>
<p>我们点击按钮，弹出1。此时我们尝试修改b.js，把<code>alert(1)</code>改为<code>alert(2)</code>，回到浏览器，发现浏览器并没有刷新，再次点击按钮，弹出了2！浏览器在不刷新的情况下，更新了js文件！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-经验分享-网页动效之Canvas篇" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/08/23/经验分享-网页动效之Canvas篇/" class="article-date">
  	<time datetime="2016-08-23T02:28:29.000Z" itemprop="datePublished">2016-08-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/23/经验分享-网页动效之Canvas篇/">经验分享-网页动效之Canvas篇</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在处理多元素动效的时候用操作DOM的方法会严重占用内存，拖慢运行速度，所以应该用Canvas画布制作多元素的动效或者游戏。</p>
<p>Canvas是HTML5的新标签。用于绘制图像（通过脚本，通常是 JavaScript），不过，canvas元素本身并没有绘制能力（它仅仅是图形的容器）。</p>
<p>Canvas提供的功能更原始，适合像素处理，动态渲染和大数据量绘制。</p>
<p>我写了一个弹弓射鸟的游戏，用的是JavaScript+Canvas，里面包含大部分Canvas的用法，以及面向对象的JavaScript写法：</p>
<p><img src="https://raw.githubusercontent.com/Hx2heng/SlingShot/master/images/code.png" alt=""></p>
<p>（手机扫一扫查看demo，我只写了touch事件，所以只能在手机上玩，或者电脑开发者模式模拟手机。）</p>
<p>项目 <a href="https://github.com/Hx2heng/SlingShot">源码地址</a></p>
<hr>
<p>该游戏优化过，即使出现超大量的元素也不会卡：</p>
<p><img src="https://raw.githubusercontent.com/Hx2heng/SlingShot/master/images/show.jpg" alt=""></p>
<p>优化通过删除冗余对象、去除setInterval改为requestAnimationFrame作为定时器、还有就是规范的游戏的开发模式。</p>
<hr>
<p>requestAnimationFrame作为定时器：</p>
<pre><code>interval: <span class="keyword">function</span>() {
     var <span class="variable">$this</span> = this;
     this.timer = requestAnimationFrame(function() {
         <span class="variable">$this</span>.render();
         //游戏时间用完结束
         if (<span class="variable">$this</span>.usedTime &lt; <span class="variable">$this</span>.time) {
              <span class="variable">$this</span>.timer = requestAnimationFrame(arguments.callee);
         } else {
              <span class="variable">$this</span>.over();
         }
     });
}
</code></pre><hr>
<p>只要学会了这个，并能自己亲手写出一个这样的游戏，那么你的canvas就可以了。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/">JS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-gulp" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/11/gulp/" class="article-date">
  	<time datetime="2016-05-11T06:38:54.000Z" itemprop="datePublished">2016-05-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/11/gulp/">gulp command not found - error after installing gulp</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>First,</p>
<p>Be sure that you have gulp and gulp.cmd (use windows search )</p>
<p>Then,</p>
<p>Copy the path of gulp.cmd ( C:\Users\XXXX\AppData\Roaming\npm)</p>
<p>Add this path to the Path envirement variable.</p>
<p><strong><em>*OR</em></strong></p>
<p>Edit “PATH” environment variable and add %APPDATA%\npm<br>(Add %APPDATA%\npm to front of Path, not end of the Path.)</p>
<p>finally,</p>
<p>reopen cmd.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-js设计模式-模拟私有变量" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/14/js设计模式-模拟私有变量/" class="article-date">
  	<time datetime="2016-01-14T08:08:59.000Z" itemprop="datePublished">2016-01-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/14/js设计模式-模拟私有变量/">js设计模式-模拟私有变量</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <pre><code><span class="comment">//假设有一个人的类,一般的写法：                       </span>
<span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>)</span>{
    <span class="keyword">this</span>.name = name;
    <span class="keyword">this</span>.age = age;
};
Person.prototype={
    born:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{
        <span class="keyword">return</span> <span class="keyword">this</span>;
    },
    say:<span class="function"><span class="keyword">function</span>(<span class="params">word</span>)</span>{
        <span class="keyword">var</span> $<span class="keyword">this</span> = <span class="keyword">this</span>;
        <span class="built_in">console</span>.log($<span class="keyword">this</span>.name);
    }
}

<span class="comment">//我们规定这个类创建的对象，其name属性必须小于4个字符</span>
<span class="comment">//那么可以这样：</span>
<span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>)</span>{
    <span class="keyword">if</span>(name.length&gt;<span class="number">4</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'name too long'</span>);
    <span class="keyword">this</span>.name = name;
    <span class="keyword">this</span>.age = age;
};
Person.prototype={
    born:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{
        <span class="keyword">return</span> <span class="keyword">this</span>;
    },
    say:<span class="function"><span class="keyword">function</span>(<span class="params">word</span>)</span>{
        <span class="keyword">var</span> $<span class="keyword">this</span> = <span class="keyword">this</span>;
        <span class="built_in">console</span>.log($<span class="keyword">this</span>.name);
    }
}
<span class="comment">//这样的话我们可以在创建对象之初限制对象的属性</span>
<span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">'Zacarh'</span>,<span class="number">23</span>);<span class="comment">//这样会报错</span>
<span class="comment">//但是有个弊端，程序员创建了符合规定的对象，但是他仍可以修改对象的属性成为不符合规则的值</span>
<span class="keyword">var</span> person2 = <span class="keyword">new</span> Person(<span class="string">'Tom'</span>,<span class="number">22</span>);<span class="comment">//成功创建</span>
person2.name = <span class="string">'Zacarh'</span>;<span class="comment">//成功修改为不符合规则的值</span>
<span class="built_in">console</span>.log(person2.name);<span class="comment">//Zacarh</span>

<span class="comment">//于是就有了私有变量的由来,我们采用闭包模拟私有变量</span>
<span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>{
    <span class="keyword">var</span> name,age;<span class="comment">//这里的变量外部访问不到，可以看成私有变量</span>
    <span class="keyword">this</span>.setName=<span class="function"><span class="keyword">function</span>(<span class="params">nameArgument</span>)</span>{<span class="comment">//这个是特权方法，可以访问私有变量</span>
        <span class="keyword">if</span>(nameArgument.length&gt;<span class="number">4</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'name too long'</span>);
        name = nameArgument;<span class="comment">//特权方法内却可以访问到外部变量。js函数作用域是在定义的时候确定的，不是在执行的时候确定的</span>
    };
    <span class="keyword">this</span>.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{
        <span class="built_in">console</span>.log(name);<span class="comment">//这里就不用this.name了</span>
    }
}
<span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();
<span class="comment">// person1.setName('Zacarh');//报错，字符长度大于4</span>
person1.setName(<span class="string">'Tom'</span>);<span class="comment">//可以</span>
person1.say();<span class="comment">//输出Tom，而且此时你无法直接更改name的值了，必须要通过setName函数才可以。</span>

<span class="comment">//上面那种做法的弊端就是，每创建一个对象，特权函数也会创建一次，这样会耗费更多的内存，不像用prototype那样所有对象共用prototype上面的方法。</span>
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/">JS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-经验分享-网页动效之CSS篇" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/23/经验分享-网页动效之CSS篇/" class="article-date">
  	<time datetime="2015-11-23T02:28:29.000Z" itemprop="datePublished">2015-11-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/23/经验分享-网页动效之CSS篇/">经验分享-网页动效之CSS篇</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="网页动效之CSS篇">网页动效之CSS篇</h2><p>在网页中实现动画效果有很多种方式，例如由js控制的canvas、svg、elements动画，还有由css3控制的svg和elements动画等（还有flash？）。css实现elements动画主要通过transition（过渡效果）和animation（动画）来控制。其中animation通过其强大的函数自定义化和丰富的控制接口以及css3与生俱来的流畅高速渲染效果，成为了动画大军的一只劲旅。</p>
<p>在制作一些简单的、动画元素少的、交互小的动画。css3的animation是最好的选择。<br>这篇文章的主题就是，用好animation的技巧。基础知识网上一大把就不说了。</p>
<h2 id="Tips1:控制动画开始执行时刻">Tips1:控制动画开始执行时刻</h2><p>我们从例子出发，假如我们想要一个小球，在某个时刻（例如点击了一个按钮）向左动一下。这时我们就可以借助 animation-play-state 这个属性。</p>
<blockquote>
<p>animation-play-state 属性规定动画正在运行还是暂停。</p>
</blockquote>
<p>假设我们需要动画的元素为.ele，.ele的上级为.ele-wrap，那么我们可以这样写css：</p>
<blockquote>
<p>.ele-wrap .ele{animation-play-state:paused;}</p>
<p>.playing .ele{animation-play-state:running;}</p>
<p>.ele{animation:moveToLeft 1s;}</p>
</blockquote>
<p>当我们给ele-wrap 加上playing（例如通过点击事件添加）的时候，这个时候ele就会动起来。</p>
<p>通过这种方法，我们能更加方便清晰地控制某些区域下元素的动画开始执行时刻。</p>
<h2 id="Tips2:叠加动画">Tips2:叠加动画</h2><p>animation 是支持叠加动画的写法的，看代码</p>
<blockquote>
<p> .ele{animation:fadeIn 1s,sildeLeft 1s}</p>
</blockquote>
<p>这个写法的意思是让元素渐显同时向左移动。</p>
<p>这里有一点要注意的是，如果后面的动画改变的元素属性和前面的动画一样的话，那么前面动画的属性改变就失效了。</p>
<blockquote>
<p> .ele{animation:fadeIn 1s,sildeLeft 1s,sildeUp 1s}</p>
</blockquote>
<p>如果是上面这种写法，那么sildeLeft将被忽略。</p>
<p>另外一种实现方法是采用元素嵌套。</p>
<p>通过给动画元素外包一个父级元素，然后给父级和子级分别加上动画。</p>
<blockquote>
<p>  .ele-wrap{animation:fadeIn 1s}</p>
<p>  .ele-warp .ele{animation:slideLeft 1s}</p>
</blockquote>
<h2 id="Tips3:连接动画">Tips3:连接动画</h2><p>通过animaiton的animation-delay可以实现动画连接。比如上个例子我们不要两个动画同时进行，我们想元素渐显后再向左移动，那么我们可以这样写：</p>
<blockquote>
<p>  .ele{animation:fadeIn 1s,sildeLeft 1s 1s}</p>
</blockquote>
<p>sildeLeft后面的第一个1s是指动画执行时间，第二个1s是指动画延迟多久才执行。这样写元素就会延迟1s才向左边移动。</p>
<p>与Tips2一样，用元素嵌套方式可以连接数目更多的动画。</p>
<h2 id="Tips4:规定动画执行位置">Tips4:规定动画执行位置</h2><p>animation-delay允许负值，负值动画将马上开始，然后跳过动画的前N秒。比如我们希望ele直接就向左移动就可以这样写：</p>
<blockquote>
<p>.ele{animation:fadeIn 1s -1s,sildeLeft 1s}</p>
</blockquote>
<p>这样写fadeIn马上执行，而且是从原本执行1s后的状态开始执行。</p>
<h2 id="Tips5:来回播放动画">Tips5:来回播放动画</h2><p>animation-direction属性在某些情况很好用。比如你想让元素按照轨迹来回移动。按照常规方法你要这样写：</p>
<pre><code> <span class="at_rule">@<span class="keyword">keyframes</span> move</span>{
     0%,100%<span class="rules">{<span class="rule"><span class="attribute">transform</span>:<span class="value"><span class="function">translate</span>(<span class="number">0</span>,<span class="number">0</span>)</span></span>;}</span>
    25%<span class="rules">{<span class="rule"><span class="attribute">transform</span>:<span class="value"><span class="function">translate</span>(<span class="number">0</span>,<span class="number">120px</span>)</span></span>;}</span>
     50%<span class="rules">{<span class="rule"><span class="attribute">transform</span>:<span class="value"><span class="function">translate</span>(<span class="number">120px</span>,<span class="number">120px</span>)</span></span>;}</span>
    75%<span class="rules">{<span class="rule"><span class="attribute">transform</span>:<span class="value"><span class="function">translate</span>(<span class="number">0</span>,<span class="number">120px</span>)</span></span>;}</span>
  }

<span class="class">.ele</span><span class="rules">{<span class="rule"><span class="attribute">animation</span>:<span class="value">move <span class="number">4s</span> infinite</span></span></span>}
</code></pre><p>如果用animation-direction ，只要这样</p>
<pre><code><span class="at_rule">@<span class="keyword">keyframes</span> move</span>{
     0%<span class="rules">{<span class="rule"><span class="attribute">transform</span>:<span class="value"><span class="function">translate</span>(<span class="number">0</span>,<span class="number">0</span>)</span></span>;}</span>
     50%<span class="rules">{<span class="rule"><span class="attribute">transform</span>:<span class="value"><span class="function">translate</span>(<span class="number">0</span>,<span class="number">120px</span>)</span></span>;}</span>
    100%<span class="rules">{<span class="rule"><span class="attribute">transform</span>:<span class="value"><span class="function">translate</span>(<span class="number">120px</span>,<span class="number">120px</span>)</span></span>;}</span>
 }

<span class="class">.ele</span><span class="rules">{<span class="rule"><span class="attribute">animation</span>:<span class="value">move <span class="number">4s</span> infinite alternate</span></span></span>}
</code></pre><p>当然了这只是简单的一个例子。</p>
<p>未完待续。。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/">JS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-arguments中的callee与caller" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/16/arguments中的callee与caller/" class="article-date">
  	<time datetime="2015-11-16T07:21:47.000Z" itemprop="datePublished">2015-11-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/16/arguments中的callee与caller/">arguments中的caller与callee</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>arguments中有两个好用的属性，caller与callee，中文意思为呼叫者和被呼叫者。那么，这两个属性，究竟是啥？</p>
<h2 id="呼叫者caller">呼叫者caller</h2><blockquote>
<p>含义：返回当前调用该属性的方法的方法</p>
</blockquote>
<p>有点绕口，详细点就是：如果一个方法里面，调用了caller，那么caller就返回调用这个方法的方法，如果这个方法是由顶级（浏览器端为window）调用的，则返回undefined。</p>
<p>我们来举个例子</p>
<pre><code><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>{
    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.caller);
}

<span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>{
    f1();
}

f1();<span class="comment">//undefined</span>
f2();<span class="comment">//function f2(){ f1();}</span>
</code></pre><p>caller在每次函数执行的时候都会重新执行。</p>
<p>这个特性意味着caller可以用来显示函数的反编译文本。</p>
<h2 id="被呼叫者callee">被呼叫者callee</h2><blockquote>
<p>含义：返回当前调用该属性的方法</p>
</blockquote>
<p>这个好理解，就是返回调用函数本身。</p>
<p>还是来看看例子</p>
<pre><code><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>{
    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.callee);
}
f1(); <span class="comment">//function f1(){ ...}</span>
</code></pre><p>利用callee我们可以轻松实现很多功能，例如递归：</p>
<pre><code>function <span class="keyword">fact</span>(<span class="keyword">n</span>){
    <span class="keyword">if</span>(<span class="keyword">n</span>&lt;=0){
        <span class="keyword">return</span> 1;
    }<span class="keyword">else</span>{
        <span class="keyword">return</span> <span class="keyword">n</span>*arguments.callee(<span class="keyword">n</span>-1);  
    }
}
</code></pre><p>或者检验实参与形参个数是否相同：</p>
<pre><code><span class="function"><span class="keyword">function</span> <span class="title">f4</span>(<span class="params">x,y,z</span>)</span>{
    <span class="keyword">if</span>(<span class="built_in">arguments</span>.length === <span class="built_in">arguments</span>.callee.length){
        <span class="built_in">console</span>.log(<span class="string">'实参形参个数相同'</span>);
    }<span class="keyword">else</span>{
        <span class="built_in">console</span>.log(<span class="string">'实参形参个数不同'</span>);
    }
}
f4(<span class="number">1</span>,<span class="number">2</span>);<span class="comment">//实参形参个数不同</span>
f4(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);<span class="comment">//实参形参个数相同</span>
</code></pre><p>还有其他功能，有待挖掘。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/">JS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-git常用命令" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/10/git常用命令/" class="article-date">
  	<time datetime="2015-11-10T00:50:44.000Z" itemprop="datePublished">2015-11-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/10/git常用命令/">git常用命令</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h1 id="常用命令：">常用命令：</h1><p>创建版本库:</p>
<blockquote>
<pre><code><span class="title">git</span> init
</code></pre></blockquote>
<p>添加文件:</p>
<blockquote>
<pre><code>git <span class="built_in">add</span> &lt;<span class="built_in">files</span>&gt;
git <span class="built_in">add</span> .   <span class="comment">#添加所有文件</span>
</code></pre></blockquote>
<p>删除文件:</p>
<blockquote>
<pre><code>git rm <span class="tag">&lt;<span class="title">files</span>&gt;</span>
</code></pre></blockquote>
<p>提交：</p>
<blockquote>
<pre><code>git <span class="operator"><span class="keyword">commit</span> -<span class="keyword">m</span> <span class="string">"描述"</span></span>
</code></pre></blockquote>
<p>显示仓库状态：</p>
<blockquote>
<pre><code>git <span class="keyword">status</span>
</code></pre></blockquote>
<p>显示diff：</p>
<blockquote>
<pre><code><span class="title">git</span> diff
</code></pre></blockquote>
<p>丢弃工作区的修改：</p>
<blockquote>
<pre><code>git checkout <span class="comment">-- file</span>
</code></pre></blockquote>
<p>创建分支：</p>
<blockquote>
<pre><code><span class="title">git</span> branch dev <span class="comment">#dev是分支名字，这里只是一个例子,下同</span>
</code></pre></blockquote>
<p>创建并切换到dev分支：</p>
<blockquote>
<pre><code>git checkout -<span class="tag">b</span> dev 
</code></pre></blockquote>
<p>查看分支：</p>
<blockquote>
<pre><code>git branch  #显示的分支中<span class="escape">``</span>*<span class="escape">``</span>号位置代表当前分支
</code></pre></blockquote>
<p>切换到dev分支：</p>
<blockquote>
<pre><code><span class="title">git</span> checkout dev
</code></pre></blockquote>
<p>合并dev分支到当前分支：</p>
<blockquote>
<pre><code>git <span class="built_in">merge</span> dev
</code></pre></blockquote>
<p>删除dev分支：</p>
<blockquote>
<pre><code><span class="label">git</span> <span class="keyword">branch </span>-d dev
</code></pre></blockquote>
<p>显示历史版本：</p>
<blockquote>
<pre><code>git <span class="command">log</span>
</code></pre></blockquote>
<p>显示历史信息：</p>
<blockquote>
<pre><code><span class="title">git</span> show
</code></pre></blockquote>
<p>显示历史操作：</p>
<blockquote>
<pre><code><span class="title">git</span> reflog
</code></pre></blockquote>
<p>退回：</p>
<blockquote>
<pre><code>git <span class="operator"><span class="keyword">reset</span> <span class="comment">--hard &lt;HEAD&gt;</span></span>
</code></pre></blockquote>
<p>添加远程仓库：</p>
<blockquote>
<pre><code><span class="label">git</span> remote <span class="keyword">add </span>origin &lt;<span class="keyword">address&gt;</span>
</code></pre></blockquote>
<p>推送并关联master：</p>
<blockquote>
<pre><code><span class="label">git</span> <span class="keyword">push </span>-u origin master
</code></pre></blockquote>
<p>关联后简化为：</p>
<blockquote>
<pre><code><span class="label">git</span> <span class="keyword">push </span>origin master
</code></pre></blockquote>
<p>克隆：</p>
<blockquote>
<pre><code>git <span class="keyword">clone</span> <span class="title">&lt;address</span>&gt;
</code></pre></blockquote>
<hr>
<h1 id="更加详细的命令大全">更加详细的命令大全</h1><h2 id="配置">配置 </h2><blockquote>
<pre><code>配置使用git仓库人员的姓名和email
$ git config --<span class="keyword">global</span> user.name <span class="string">"Your Name"</span>  
$ git config --<span class="keyword">global</span> user.email you@yourdomain.example.com 

git config --<span class="keyword">global</span> credential.helper cache <span class="preprocessor">#配置到缓存 默认15分钟   </span>
git config --<span class="keyword">global</span> credential.helper <span class="comment">'cache --timeout=3600'  #修改缓存时间   </span>

git config --<span class="keyword">global</span> color.ui <span class="literal">true</span>  
git config --<span class="keyword">global</span> <span class="keyword">alias</span>.co checkout  
git config --<span class="keyword">global</span> <span class="keyword">alias</span>.ci commit  
git config --<span class="keyword">global</span> <span class="keyword">alias</span>.st status  
git config --<span class="keyword">global</span> <span class="keyword">alias</span>.br branch  
git config --<span class="keyword">global</span> core.editor <span class="string">"mate -w"</span>    <span class="preprocessor"># 设置Editor使用textmate  </span>
git config -<span class="number">1</span> <span class="preprocessor">#列举所有配置用户的git配置文件~/.gitconfig  </span>
</code></pre></blockquote>
<h2 id="查看、添加、提交、删除、找回，重置修改文件">查看、添加、提交、删除、找回，重置修改文件</h2><blockquote>
<pre><code>git help &lt;<span class="command"><span class="keyword">command</span>&gt;  # 显示<span class="title">command</span>的<span class="title">help</span>  </span>
git show            <span class="comment"># 显示某次提交的内容  </span>
git show $id  

git co  <span class="comment">-- &lt;file&gt;   # 抛弃工作区修改  </span>
git co  .           <span class="comment"># 抛弃工作区修改  </span>

git <span class="built_in">add</span> &lt;<span class="built_in">file</span>&gt;      <span class="comment"># 将工作文件修改提交到本地暂存区  </span>
git <span class="built_in">add</span> .           <span class="comment"># 将所有修改过的工作文件提交暂存区  </span>

git rm &lt;<span class="built_in">file</span>&gt;       <span class="comment"># 从版本库中删除文件  </span>
git rm &lt;<span class="built_in">file</span>&gt; <span class="comment">--cached  # 从版本库中删除文件，但不删除文件  </span>

git reset &lt;<span class="built_in">file</span>&gt;    <span class="comment"># 从暂存区恢复到工作文件  </span>
git reset <span class="comment">-- .      # 从暂存区恢复到工作文件  </span>
git reset <span class="comment">--hard    # 恢复最近一次提交过的状态，即放弃上次提交后的所有本次修改  </span>

git ci &lt;<span class="built_in">file</span>&gt;  
git ci .  
git ci -<span class="operator">a</span>           <span class="comment"># 将git add, git rm和git ci等操作都合并在一起做  </span>
git ci -am <span class="string">"some comments"</span>  
git ci <span class="comment">--amend      # 修改最后一次提交记录  </span>

git revert &lt;$id&gt;    <span class="comment"># 恢复某次提交的状态，恢复动作本身也创建了一次提交对象  </span>
git revert HEAD     <span class="comment"># 恢复最后一次提交的状态  </span>
</code></pre></blockquote>
<h2 id="查看文件diff">查看文件diff</h2><blockquote>
<pre><code>git diff <span class="variable">&lt;file&gt;</span>     <span class="comment"># 比较当前文件和暂存区文件差异  </span>
git diff  
git diff <span class="variable">&lt;$id1&gt;</span> <span class="variable">&lt;$id2&gt;</span>   <span class="comment"># 比较两次提交之间的差异  </span>
git diff <span class="variable">&lt;branch1&gt;</span>..<span class="variable">&lt;branch2&gt;</span> <span class="comment"># 在两个分支之间比较  </span>
git diff --staged   <span class="comment"># 比较暂存区和版本库差异  </span>
git diff --cached   <span class="comment"># 比较暂存区和版本库差异  </span>
git diff --stat     <span class="comment"># 仅仅比较统计信息  </span>
</code></pre></blockquote>
<h2 id="查看提交记录">查看提交记录</h2><blockquote>
<pre><code>git <span class="command">log</span>  
git <span class="command">log</span> &lt;<span class="type">file</span>&gt;      <span class="comment"># 查看该文件每次提交记录  </span>
git <span class="command">log</span> -p &lt;<span class="type">file</span>&gt;   <span class="comment"># 查看每次详细修改内容的diff  </span>
git <span class="command">log</span> -p -<span class="number">2</span>       <span class="comment"># 查看最近两次详细修改内容的diff  </span>
git <span class="command">log</span> <span class="comment">--stat      #查看提交统计信息  </span>
</code></pre></blockquote>
<p>tig:Mac上可以使用tig代替diff和log，brew install tig</p>
<h2 id="取得Git仓库">取得Git仓库</h2><blockquote>
<pre><code>git init  <span class="comment">#初始化一个版本仓库   </span>

git <span class="keyword">clone</span> <span class="title">&lt;address</span>&gt;  <span class="comment">#Clone远程版本库  </span>

git remote add origin <span class="tag">&lt;address&gt;</span>  <span class="comment">#添加远程版本库origin</span>

git remote -v  <span class="comment">#查看远程仓库</span>
</code></pre></blockquote>
<h2 id="提交你的修改">提交你的修改</h2><blockquote>
<pre><code>git commit –m <span class="string">"你的注释"</span>  <span class="comment">#提交你的修改  </span>

git push origin master  <span class="comment">#推送你的更新到远程服务器,语法为 git push [远程名] [本地分支]:[远程分支]  </span>

git status  <span class="comment">#查看文件状态 </span>

git <span class="built_in">add</span> readme.txt  <span class="comment">#跟踪新文件</span>

git rm readme.txt  <span class="comment">#从当前跟踪列表移除文件，并完全删除</span>

git rm –cached readme.txt  <span class="comment">#仅在暂存区删除，保留文件在当前目录，不再跟踪 </span>

git mv reademe.txt readme  <span class="comment">#重命名文件 </span>

git <span class="built_in">log</span>  <span class="comment">#查看提交的历史记录 </span>

git commit <span class="comment">--amend  #修改最后一次提交注释的，利用–amend参数 </span>

-忘记提交某些修改，下面的三条命令只会得到一个提交。 
git commit –m &amp;quot;<span class="built_in">add</span> readme.txt&amp;quot;  
git <span class="built_in">add</span> readme_forgotten  
git commit –amend  


git reset HEAD b  <span class="comment">#假设你已经使用git add .，将修改过的文件a、b加到暂存区。现在你只想提交a文件，不想提交b文件，应该这样</span>

git checkout –- readme.txt  <span class="comment">#取消对文件的修改</span>
</code></pre></blockquote>
<h2 id="查看、切换、创建和删除分支">查看、切换、创建和删除分支</h2><blockquote>
<pre><code>git br -r           <span class="comment"># 查看远程分支  </span>
git br <span class="variable">&lt;new_branch&gt;</span> <span class="comment"># 创建新的分支  </span>
git br -v           <span class="comment"># 查看各个分支最后提交信息  </span>
git br --merged     <span class="comment"># 查看已经被合并到当前分支的分支  </span>
git br --no-merged  <span class="comment"># 查看尚未被合并到当前分支的分支  </span>

git co <span class="variable">&lt;branch&gt;</span>     <span class="comment"># 切换到某个分支  </span>
git co -b <span class="variable">&lt;new_branch&gt;</span> <span class="comment"># 创建新的分支，并且切换过去  </span>
git co -b <span class="variable">&lt;new_branch&gt;</span> <span class="variable">&lt;branch&gt;</span>  <span class="comment"># 基于branch创建新的new_branch  </span>

git co <span class="variable">$id</span>          <span class="comment"># 把某次历史提交记录checkout出来，但无分支信息，切换到其他分支会自动删除  </span>
git co <span class="variable">$id</span> -b <span class="variable">&lt;new_branch&gt;</span>  <span class="comment"># 把某次历史提交记录checkout出来，创建成一个分支  </span>

git br -d <span class="variable">&lt;branch&gt;</span>  <span class="comment"># 删除某个分支  </span>
git br -D <span class="variable">&lt;branch&gt;</span>  <span class="comment"># 强制删除某个分支 (未被合并的分支被删除的时候需要强制)  </span>
</code></pre></blockquote>
<h2 id="分支合并和rebase">分支合并和rebase</h2><blockquote>
<pre><code>git merge <span class="tag">&lt;branch&gt;</span>               <span class="comment"># 将branch分支合并到当前分支  </span>
git merge origin/<span class="keyword">master</span> <span class="title">--no-ff</span>  <span class="comment"># 不要Fast-Foward合并，这样可以生成merge提交  </span>
git rebase <span class="keyword">master</span> <span class="title">&lt;branch</span>&gt;       <span class="comment"># 将master rebase到branch，相当于：  </span>
git co <span class="tag">&lt;branch&gt;</span> &amp;&amp; git rebase <span class="keyword">master</span> <span class="title">&amp;&amp; git</span> co <span class="keyword">master</span> <span class="title">&amp;&amp; git</span> merge <span class="tag">&lt;branch&gt;</span>  
</code></pre></blockquote>
<h2 id="Git补丁管理(方便在多台机器上开发同步时用)">Git补丁管理(方便在多台机器上开发同步时用)</h2><blockquote>
<pre><code>git diff &gt; ../sync.<span class="keyword">patch</span>         <span class="preprocessor"># 生成补丁  </span>
git apply ../sync.<span class="keyword">patch</span>          <span class="preprocessor"># 打补丁  </span>
git apply --check ../sync.<span class="keyword">patch</span>  <span class="preprocessor">#测试补丁能否成功  </span>
</code></pre></blockquote>
<h2 id="Git暂存管理">Git暂存管理</h2><blockquote>
<pre><code>git stash                        <span class="preprocessor"># 暂存  </span>
git stash <span class="built_in">list</span>                   <span class="preprocessor"># 列所有stash  </span>
git stash apply                  <span class="preprocessor"># 恢复暂存的内容  </span>
git stash <span class="built_in">drop</span>                   <span class="preprocessor"># 删除暂存区  </span>
</code></pre></blockquote>
<h2 id="Git远程分支管理">Git远程分支管理</h2><blockquote>
<pre><code>git pull                         <span class="comment"># 抓取远程仓库所有分支更新并合并到本地  </span>
git pull --<span class="keyword">no</span>-ff                 <span class="comment"># 抓取远程仓库所有分支更新并合并到本地，不要快进合并  </span>
git fetch origin                 <span class="comment"># 抓取远程仓库更新  </span>
git merge origin/master          <span class="comment"># 将远程主分支合并到本地当前分支  </span>
git co --track origin/branch     <span class="comment"># 跟踪某个远程分支创建相应的本地分支  </span>
git co -b &lt;local_branch&gt; origin/&lt;remote_branch&gt;  <span class="comment"># 基于远程分支创建本地分支，功能同上  </span>

git <span class="keyword">push</span>                         <span class="comment"># push所有分支  </span>
git <span class="keyword">push</span> origin master           <span class="comment"># 将本地主分支推到远程主分支  </span>
git <span class="keyword">push</span> -u origin master        <span class="comment"># 将本地主分支推到远程(如无远程主分支则创建，用于初始化远程仓库)  </span>
git <span class="keyword">push</span> origin &lt;local_branch&gt;   <span class="comment"># 创建远程分支， origin是远程仓库名  </span>
git <span class="keyword">push</span> origin &lt;local_branch&gt;:&lt;remote_branch&gt;  <span class="comment"># 创建远程分支  </span>
git <span class="keyword">push</span> origin :&lt;remote_branch&gt;  <span class="comment">#先删除本地分支(git br -d &lt;branch&gt;)，然后再push删除远程分支  </span>
</code></pre></blockquote>
<h2 id="基本的分支管理">基本的分支管理</h2><blockquote>
<pre><code>git branch <span class="built_in">dev</span>  #创建一个分支 

git chekcout <span class="built_in">dev</span>  #切换工作目录到<span class="built_in">dev</span> 

git chekcout –b <span class="built_in">dev</span>  #将上面的命令合在一起，创建<span class="built_in">dev</span>分支并切换到<span class="built_in">dev</span> 

git merge <span class="built_in">dev</span>  #合并<span class="built_in">dev</span>分支，当前工作目录为master

git branch –d <span class="built_in">dev</span>  #合并完成后，没有出现冲突，删除<span class="built_in">dev</span>分支 

git fetch  #拉去远程仓库的数据，语法为git fetch [remote-name]

git pull  #fetch 会拉去最新的远程仓库数据，但不会自动到当前目录下，要自动合并

git remote <span class="built_in">show</span> origin  #查看远程仓库的信息  

git checkout –b <span class="built_in">dev</span> origin/develop  #建立本地的<span class="built_in">dev</span>分支追踪远程仓库的develop分支 
</code></pre></blockquote>
<h2 id="Git远程仓库管理">Git远程仓库管理</h2><blockquote>
<pre><code>git remote -v                    <span class="preprocessor"># 查看远程服务器地址和仓库名称  </span>
git remote show origin           <span class="preprocessor"># 查看远程服务器仓库状态  </span>
git remote <span class="keyword">add</span> origin git@ github:robbin/robbin_site.git         <span class="preprocessor"># 添加远程仓库地址  </span>
git remote <span class="keyword">set</span>-url origin git@ github.com:robbin/robbin_site.git <span class="preprocessor"># 设置远程仓库地址(用于修改远程仓库地址)  </span>
git remote rm &lt;repository&gt;       <span class="preprocessor"># 删除远程仓库  </span>
</code></pre></blockquote>
<h2 id="创建远程仓库">创建远程仓库</h2><blockquote>
<pre><code>git <span class="keyword">clone</span> <span class="title">--bare</span> robbin_site robbin_site.git  <span class="comment"># 用带版本的项目创建纯版本仓库  </span>
scp -r my_project.git git@ git.csdn.net:~      <span class="comment"># 将纯仓库上传到服务器上  </span>

mkdir robbin_site.git &amp;&amp; cd robbin_site.git &amp;&amp; git --bare init <span class="comment"># 在服务器创建纯仓库  </span>
git remote add origin git@ github.com:robbin/robbin_site.git    <span class="comment"># 设置远程仓库地址  </span>
git push -u origin <span class="keyword">master</span>                                      <span class="title"># 客户端首次提交  
git</span> push -u origin develop  <span class="comment"># 首次将本地develop分支提交到远程develop分支，并且track  </span>

git remote set-head origin <span class="keyword">master</span>   <span class="title"># 设置远程仓库的HEAD</span>指向<span class="literal">master</span>分支  

也可以命令设置跟踪远程库和本地库
git branch --set-upstream <span class="keyword">master</span> <span class="title">origin</span>/<span class="keyword">master</span>  
<span class="title">git</span> branch --set-upstream develop origin/develop  
</code></pre></blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-剥皮鱼全接触" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/06/剥皮鱼全接触/" class="article-date">
  	<time datetime="2015-11-06T06:16:13.000Z" itemprop="datePublished">2015-11-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/06/剥皮鱼全接触/">剥皮鱼全接触</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="剥皮鱼">剥皮鱼 </h2><p>剥皮鱼学名叫绿鳍马面鲀，又叫马面鱼，潮汕俗名：迪仔。我觉得叫迪克牛仔or德州牛仔帅得多。</p>
<p><img src="/images/1.jpg" alt=""></p>
<p>剥皮鱼 加辣椒 和 豆酱 真 是  他  妈  的     好   吃  ！！</p>
<p>豆酱焖剥皮鱼的做法：<br>食材<br>主料<br>剥皮鱼5条<br>辅料<br>豆酱1汤匙、适量辣椒、适量蒜头、适量姜、适量小葱、适量油、适量清水<br>步骤<br>1.热锅加油炒蒜头<br>2.放剥皮鱼煎<br>3.煎至两面微黄放姜丝、葱段、辣椒下去炒香<br>4.加入1汤匙的豆酱<br>5.再加少量清水焖至汁少就可以岀锅了<br>6.成品<br>小贴士<br>豆酱有咸味不用加盐了，鱼很鲜不用加过多的调料。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/叽里呱啦/">叽里呱啦</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/生活/">生活</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 黄信政
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten changed by Hx2
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>